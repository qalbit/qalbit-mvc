(()=>{(function(){"use strict";function q(u){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u,{once:!0}):u()}q(function(){const u=typeof window.matchMedia=="function",a=u?window.matchMedia("(prefers-reduced-motion: reduce)"):null,i=!!(a&&a.matches),l=u?window.matchMedia("(min-width: 1024px)"):null,t=()=>l?l.matches:window.innerWidth>=1024,c=typeof window.gsap!="undefined",s=c?window.gsap:null;c&&typeof window.ScrollTrigger!="undefined"&&s.registerPlugin(window.ScrollTrigger),A({gsap:s,hasGsap:c,prefersReducedMotion:i}),b({gsap:s,hasGsap:c,prefersReducedMotion:i}),L({gsap:s,hasGsap:c,prefersReducedMotion:i}),I({gsap:s,hasGsap:c,prefersReducedMotion:i}),E({isDesktop:t}),T(),x(),_()});function A(u){const{gsap:a,hasGsap:i,prefersReducedMotion:l}=u,t=document.querySelector("[data-cta-section]");if(!t)return;if(!i||l){t.querySelectorAll("[data-cta-step]").forEach(r=>{r.style.opacity="1",r.style.transform="none"});const e=t.querySelector("[data-cta-connector]");e&&(e.style.transform="scaleX(1)");return}const c=Array.from(t.querySelectorAll("[data-cta-step]"));if(!c.length)return;const s=t.querySelector("[data-cta-connector]");let d=!1;function p(){if(d)return;d=!0;const n=a.timeline();s&&n.fromTo(s,{scaleX:0,autoAlpha:0},{scaleX:1,autoAlpha:1,duration:.6,ease:"power2.out"}),n.fromTo(c,{y:32,autoAlpha:0},{y:0,autoAlpha:1,duration:.6,ease:"power3.out",stagger:.18},s?"-=0.25":0)}"IntersectionObserver"in window?new IntersectionObserver(e=>{e.forEach(r=>{r.target===t&&r.isIntersecting&&p()})},{threshold:.35}).observe(t):p()}function b(u){const{gsap:a,hasGsap:i,prefersReducedMotion:l}=u,t=document.querySelector("[data-faq-section]");if(!t)return;const c=Array.from(t.querySelectorAll("[data-faq-item]")),s=Array.from(t.querySelectorAll("[data-faq-trigger]"));if(!c.length||!s.length)return;if(i&&!l){const e=t.querySelector("[data-faq-header]"),r=a.timeline({paused:!0});if(e&&r.from(e,{y:24,autoAlpha:0,duration:.35,ease:"power2.out"}),r.from(c,{y:24,autoAlpha:0,duration:.35,ease:"power2.out",stagger:.05},e?"-=0.1":0),"IntersectionObserver"in window){const o=new IntersectionObserver(m=>{m.forEach(h=>{h.target===t&&h.isIntersecting&&(r.play(),o.disconnect())})},{threshold:.2});o.observe(t)}else r.play()}const d=new WeakMap;function p(e,r){const o=e.querySelector("[data-faq-panel]"),m=e.querySelector("[data-faq-trigger]");if(!o||!m)return;const h=d.get(o);if(h&&h.kill(),e.classList.toggle("is-open",r),m.setAttribute("aria-expanded",r?"true":"false"),o.hidden=!1,!i||l){const f=r?o.scrollHeight+"px":"0px";o.style.maxHeight=f,r||setTimeout(()=>{o.hidden=!0},260);return}const g=o.offsetHeight,y=r?o.scrollHeight:0,w=a.fromTo(o,{height:g},{height:y,duration:.28,ease:"power2.out",onComplete:()=>{o.style.height="",r||(o.hidden=!0)}});d.set(o,w)}function n(e){const r=e.classList.contains("is-open");c.forEach(o=>{o!==e&&o.classList.contains("is-open")&&p(o,!1)}),p(e,!r)}c.forEach((e,r)=>{const o=e.querySelector("[data-faq-panel]"),m=e.querySelector("[data-faq-trigger]");if(!o||!m)return;o.style.overflow="hidden",o.style.maxHeight="none";const h=r===0;e.classList.toggle("is-open",h),m.setAttribute("aria-expanded",h?"true":"false"),h?(o.hidden=!1,o.style.height="auto"):(o.hidden=!0,o.style.height="0"),m.addEventListener("click",()=>n(e))})}function L(u){const{gsap:a,hasGsap:i,prefersReducedMotion:l}=u,t=document.querySelector("[data-blog-teaser]");if(!t)return;const c=t.querySelector("[data-blog-header]"),s=t.querySelector("[data-blog-cta]"),d=Array.from(t.querySelectorAll("[data-blog-card]"));if(!i||l||!d.length)return;c&&a.set(c,{y:18,autoAlpha:0}),s&&a.set(s,{y:18,autoAlpha:0}),a.set(d,{y:26,autoAlpha:0});let p=!1;function n(){if(p)return;p=!0;const e=a.timeline({defaults:{duration:.6,ease:"power3.out"}});c&&e.to(c,{y:0,autoAlpha:1},0),s&&e.to(s,{y:0,autoAlpha:1},.05),e.to(d,{y:0,autoAlpha:1,stagger:.12},.1)}if("IntersectionObserver"in window){const e=new IntersectionObserver(r=>{r.forEach(o=>{o.target===t&&o.isIntersecting&&(n(),e.disconnect())})},{threshold:.25});e.observe(t)}else n()}function I(u){const{gsap:a,hasGsap:i,prefersReducedMotion:l}=u,t=document.querySelector("[data-contact-cta-section]");if(!t)return;const c=t.querySelector("[data-contact-cta-left]"),s=Array.from(t.querySelectorAll("[data-contact-stat]")),d=t.querySelector("[data-contact-cta-form]");if(!i||l)return;c&&a.set(c,{autoAlpha:0,y:26}),d&&a.set(d,{autoAlpha:0,y:26}),s.length&&a.set(s,{autoAlpha:0,y:26});let p=!1;function n(){if(p)return;p=!0;const e=a.timeline({defaults:{duration:.65,ease:"power3.out"}});c&&e.to(c,{autoAlpha:1,y:0},0),d&&e.to(d,{autoAlpha:1,y:0},.08),s.length&&e.to(s,{autoAlpha:1,y:0,stagger:.1},.12)}if("IntersectionObserver"in window){const e=new IntersectionObserver(r=>{r.forEach(o=>{o.target===t&&o.isIntersecting&&(n(),e.disconnect())})},{threshold:.25});e.observe(t)}else n()}function E(u){const{isDesktop:a}=u,i=document.querySelector("[data-exit-popup]");if(!i)return;const l="qalbit_exit_popup_dismissed",t=(function(){try{const f="__exit_test";return window.sessionStorage.setItem(f,"1"),window.sessionStorage.removeItem(f),!0}catch(f){return!1}})();if(t&&sessionStorage.getItem(l)==="1")return;const c=i.querySelectorAll("[data-exit-close]"),s=i.querySelector("form"),d=2e4,p=.5;let n=!1;function e(){t&&sessionStorage.setItem(l,"1")}function r(){i.classList.remove("hidden"),i.setAttribute("aria-hidden","false"),document.documentElement.classList.add("overflow-hidden"),document.body.classList.add("overflow-hidden")}function o(){n||(n=!0),i.classList.add("hidden"),i.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("overflow-hidden"),document.body.classList.remove("overflow-hidden"),e(),m()}function m(){window.removeEventListener("mouseout",w),window.removeEventListener("scroll",g,{passive:!0})}function h(f){n||(n=!0,m(),r())}c.forEach(function(f){f.addEventListener("click",function(v){v.preventDefault(),o()})}),i.addEventListener("click",function(f){f.target===i&&o()}),s&&s.addEventListener("submit",function(){e(),m()}),window.setTimeout(function(){!n&&(!t||sessionStorage.getItem(l)!=="1")&&h("timer")},d);function g(){if(n){window.removeEventListener("scroll",g,{passive:!0});return}const f=document.documentElement,v=window.scrollY||f.scrollTop||0,k=window.innerHeight||f.clientHeight||0,S=f.scrollHeight||0;if(!S)return;(v+k)/S>=p&&h("scroll")}window.addEventListener("scroll",g,{passive:!0});const y=typeof a=="function"?a:function(){return window.innerWidth>=1024};function w(f){!y()||n||f.relatedTarget||f.toElement||f.clientY<=0&&h("exit-intent")}y()&&window.addEventListener("mouseout",w)}function T(){var u=document.querySelectorAll('form[data-track="contact-form"]');u.length&&u.forEach(function(a){var i=a.querySelector('input[name="name"]'),l=a.querySelector('input[name="email"]'),t=a.querySelector('textarea[name="message"]');if(!i||!l||!t)return;function c(n){var e=n.trim();return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!1}function s(n){if(n){n.classList.remove("border-red-400"),n.classList.contains("border-slate-300")||n.classList.add("border-slate-300");var e=n.closest(".space-y-1")||n.parentElement;if(e){var r=e.querySelector("[data-field-error]");r&&r.remove()}}}function d(n,e){if(n){n.classList.remove("border-slate-300"),n.classList.add("border-red-400");var r=n.closest(".space-y-1")||n.parentElement;if(r){var o=r.querySelector("[data-field-error]");o||(o=document.createElement("p"),o.setAttribute("data-field-error","true"),o.className="mt-1 text-[11px] text-red-600",r.appendChild(o)),o.textContent=e}}}function p(){var n=!1;s(i),s(l),s(t);var e=i.value.trim(),r=l.value.trim(),o=t.value.trim();return e||(d(i,"Please enter your name."),n=!0),r?c(r)||(d(l,"Please enter a valid email address."),n=!0):(d(l,"Please enter your email."),n=!0),(!o||o.length<20)&&(d(t,"Please add a few more details (at least 20 characters)."),n=!0),!n}a.addEventListener("submit",function(n){if(!p()){n.preventDefault();var e=a.querySelector("[data-field-error]");e&&typeof e.scrollIntoView=="function"&&e.scrollIntoView({block:"nearest"})}}),[i,l,t].forEach(function(n){n.addEventListener("input",function(){s(n)})})})}function x(){var u=document.querySelector("[data-cookie-banner]");if(!u)return;var a="qalbit_cookie_consent_v1";try{if(window.localStorage&&localStorage.getItem(a)==="accepted")return}catch(t){}u.classList.remove("hidden");var i=u.querySelector("[data-cookie-accept]");function l(){try{window.localStorage&&localStorage.setItem(a,"accepted")}catch(t){}u.classList.add("hidden"),window.dataLayer&&Array.isArray(window.dataLayer)&&window.dataLayer.push({event:"cookie_consent_accepted"})}i&&i.addEventListener("click",function(t){t.preventDefault(),l()})}function _(){if(typeof window.intlTelInput!="function"){console.warn("[intlTelInput] Library not available");return}var u=document.querySelectorAll("[data-intl-tel-input]");u.length&&u.forEach(function(a){if(!a.__itiInstance){var i=a.form||null,l=window.intlTelInput(a,{initialCountry:"auto",geoIpLookup:(t,c)=>{fetch("https://ipapi.co/json").then(s=>s.json()).then(s=>t(s.country_code)).catch(()=>c())},hiddenInput:t=>({phone:"phone_full",country:"country_code"}),separateDialCode:!0,nationalMode:!1,autoHideDialCode:!1,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/utils.min.js"});a.__itiInstance=l,i&&i.addEventListener("submit",function(){try{l.isValidNumber()&&(a.value=l.getNumber())}catch(t){console.warn("[intlTelInput] Failed to normalize phone:",t)}})}})}})();})();

(()=>{(function(){"use strict";function _(u){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u,{once:!0}):u()}_(function(){const u=typeof window.matchMedia=="function",a=u?window.matchMedia("(prefers-reduced-motion: reduce)"):null,s=!!(a&&a.matches),l=u?window.matchMedia("(min-width: 1024px)"):null,t=()=>l?l.matches:window.innerWidth>=1024,c=typeof window.gsap!="undefined",e=c?window.gsap:null;c&&typeof window.ScrollTrigger!="undefined"&&e.registerPlugin(window.ScrollTrigger),M({gsap:e,hasGsap:c,prefersReducedMotion:s}),j({gsap:e,hasGsap:c,prefersReducedMotion:s}),P({gsap:e,hasGsap:c,prefersReducedMotion:s}),D({gsap:e,hasGsap:c,prefersReducedMotion:s}),H(),R(),O(),F()});function M(u){const{gsap:a,hasGsap:s,prefersReducedMotion:l}=u,t=document.querySelector("[data-cta-section]");if(!t)return;if(!s||l){t.querySelectorAll("[data-cta-step]").forEach(i=>{i.style.opacity="1",i.style.transform="none"});const n=t.querySelector("[data-cta-connector]");n&&(n.style.transform="scaleX(1)");return}const c=Array.from(t.querySelectorAll("[data-cta-step]"));if(!c.length)return;const e=t.querySelector("[data-cta-connector]");let f=!1;function m(){if(f)return;f=!0;const r=a.timeline();e&&r.fromTo(e,{scaleX:0,autoAlpha:0},{scaleX:1,autoAlpha:1,duration:.6,ease:"power2.out"}),r.fromTo(c,{y:32,autoAlpha:0},{y:0,autoAlpha:1,duration:.6,ease:"power3.out",stagger:.18},e?"-=0.25":0)}"IntersectionObserver"in window?new IntersectionObserver(n=>{n.forEach(i=>{i.target===t&&i.isIntersecting&&m()})},{threshold:.35}).observe(t):m()}function j(u){const{gsap:a,hasGsap:s,prefersReducedMotion:l}=u,t=document.querySelector("[data-faq-section]");if(!t)return;const c=Array.from(t.querySelectorAll("[data-faq-item]")),e=Array.from(t.querySelectorAll("[data-faq-trigger]"));if(!c.length||!e.length)return;if(s&&!l){const n=t.querySelector("[data-faq-header]"),i=a.timeline({paused:!0});if(n&&i.from(n,{y:24,autoAlpha:0,duration:.35,ease:"power2.out"}),i.from(c,{y:24,autoAlpha:0,duration:.35,ease:"power2.out",stagger:.05},n?"-=0.1":0),"IntersectionObserver"in window){const o=new IntersectionObserver(v=>{v.forEach(y=>{y.target===t&&y.isIntersecting&&(i.play(),o.disconnect())})},{threshold:.2});o.observe(t)}else i.play()}const f=new WeakMap;function m(n,i){const o=n.querySelector("[data-faq-panel]"),v=n.querySelector("[data-faq-trigger]");if(!o||!v)return;const y=f.get(o);if(y&&y.kill(),n.classList.toggle("is-open",i),v.setAttribute("aria-expanded",i?"true":"false"),o.hidden=!1,!s||l){const d=i?o.scrollHeight+"px":"0px";o.style.maxHeight=d,i||setTimeout(()=>{o.hidden=!0},260);return}const E=o.offsetHeight,T=i?o.scrollHeight:0,C=a.fromTo(o,{height:E},{height:T,duration:.28,ease:"power2.out",onComplete:()=>{o.style.height="",i||(o.hidden=!0)}});f.set(o,C)}function r(n){const i=n.classList.contains("is-open");c.forEach(o=>{o!==n&&o.classList.contains("is-open")&&m(o,!1)}),m(n,!i)}c.forEach((n,i)=>{const o=n.querySelector("[data-faq-panel]"),v=n.querySelector("[data-faq-trigger]");if(!o||!v)return;o.style.overflow="hidden",o.style.maxHeight="none";const y=i===0;n.classList.toggle("is-open",y),v.setAttribute("aria-expanded",y?"true":"false"),y?(o.hidden=!1,o.style.height="auto"):(o.hidden=!0,o.style.height="0"),v.addEventListener("click",()=>r(n))})}function P(u){const{gsap:a,hasGsap:s,prefersReducedMotion:l}=u,t=document.querySelector("[data-blog-teaser]");if(!t)return;const c=t.querySelector("[data-blog-header]"),e=t.querySelector("[data-blog-cta]"),f=Array.from(t.querySelectorAll("[data-blog-card]"));if(!s||l||!f.length)return;c&&a.set(c,{y:18,autoAlpha:0}),e&&a.set(e,{y:18,autoAlpha:0}),a.set(f,{y:26,autoAlpha:0});let m=!1;function r(){if(m)return;m=!0;const n=a.timeline({defaults:{duration:.6,ease:"power3.out"}});c&&n.to(c,{y:0,autoAlpha:1},0),e&&n.to(e,{y:0,autoAlpha:1},.05),n.to(f,{y:0,autoAlpha:1,stagger:.12},.1)}if("IntersectionObserver"in window){const n=new IntersectionObserver(i=>{i.forEach(o=>{o.target===t&&o.isIntersecting&&(r(),n.disconnect())})},{threshold:.25});n.observe(t)}else r()}function D(u){const{gsap:a,hasGsap:s,prefersReducedMotion:l}=u,t=document.querySelector("[data-contact-cta-section]");if(!t)return;const c=t.querySelector("[data-contact-cta-left]"),e=Array.from(t.querySelectorAll("[data-contact-stat]")),f=t.querySelector("[data-contact-cta-form]");if(!s||l)return;c&&a.set(c,{autoAlpha:0,y:26}),f&&a.set(f,{autoAlpha:0,y:26}),e.length&&a.set(e,{autoAlpha:0,y:26});let m=!1;function r(){if(m)return;m=!0;const n=a.timeline({defaults:{duration:.65,ease:"power3.out"}});c&&n.to(c,{autoAlpha:1,y:0},0),f&&n.to(f,{autoAlpha:1,y:0},.08),e.length&&n.to(e,{autoAlpha:1,y:0,stagger:.1},.12)}if("IntersectionObserver"in window){const n=new IntersectionObserver(i=>{i.forEach(o=>{o.target===t&&o.isIntersecting&&(r(),n.disconnect())})},{threshold:.25});n.observe(t)}else r()}function B(u){const{isDesktop:a}=u,s=document.querySelector("[data-exit-popup]");if(!s)return;const l="qalbit_exit_popup_dismissed",t=(function(){try{const d="__exit_test";return window.sessionStorage.setItem(d,"1"),window.sessionStorage.removeItem(d),!0}catch(d){return!1}})();if(t&&sessionStorage.getItem(l)==="1")return;const c=s.querySelectorAll("[data-exit-close]"),e=s.querySelector("form"),f=2e4,m=.5;let r=!1;function n(){t&&sessionStorage.setItem(l,"1")}function i(){s.classList.remove("hidden"),s.setAttribute("aria-hidden","false"),document.documentElement.classList.add("overflow-hidden"),document.body.classList.add("overflow-hidden")}function o(){r||(r=!0),s.classList.add("hidden"),s.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("overflow-hidden"),document.body.classList.remove("overflow-hidden"),n(),v()}function v(){window.removeEventListener("mouseout",C),window.removeEventListener("scroll",E,{passive:!0})}function y(d){r||(r=!0,v(),i())}if(c.forEach(function(d){d.addEventListener("click",function(S){S.preventDefault(),o()})}),s.addEventListener("click",function(d){d.target===s&&o()}),e){let S=function(g){d&&(g?(d.dataset.originalLabel||(d.dataset.originalLabel=d.textContent||"Send message"),d.disabled=!0,d.textContent="Sending..."):(d.disabled=!1,d.dataset.originalLabel&&(d.textContent=d.dataset.originalLabel)))},x=function(){let g=e.querySelector("[data-js-global-error]");g||(g=document.createElement("div"),g.setAttribute("data-js-global-error","true"),g.className="mb-3 hidden rounded-md border border-red-200 bg-red-50 px-4 py-3 text-xs text-red-800",e.prepend(g));let p=e.querySelector("[data-js-global-success]");p||(p=document.createElement("div"),p.setAttribute("data-js-global-success","true"),p.className="mb-3 hidden rounded-md border border-green-200 bg-green-50 px-4 py-3 text-xs text-green-800",e.prepend(p)),["name","email","message"].forEach(function(w){const b=e.querySelector(`[name="${w}"]`);if(!b)return;let h=e.querySelector(`[data-js-error-for="${w}"]`);h||(h=document.createElement("p"),h.setAttribute("data-js-error-for",w),h.className="mt-1 hidden text-[11px] text-red-600",b.insertAdjacentElement("afterend",h))})},q=function(){const g=e.querySelector("[data-js-global-error]");g&&(g.textContent="",g.classList.add("hidden"));const p=e.querySelector("[data-js-global-success]");p&&(p.textContent="",p.classList.add("hidden")),["name","email","message"].forEach(function(w){const b=e.querySelector(`[name="${w}"]`);b&&(b.classList.remove("border-red-400"),b.classList.add("border-slate-300"));const h=e.querySelector(`[data-js-error-for="${w}"]`);h&&(h.textContent="",h.classList.add("hidden"))})},I=function(g){if(x(),q(),!g)return;const p=e.querySelector("[data-js-global-error]");g.global&&p&&(p.textContent=g.global,p.classList.remove("hidden")),["name","email","message"].forEach(function(w){const b=g[w];if(!b)return;const h=e.querySelector(`[name="${w}"]`);h&&(h.classList.remove("border-slate-300"),h.classList.add("border-red-400"));const L=e.querySelector(`[data-js-error-for="${w}"]`);L&&(L.textContent=b,L.classList.remove("hidden"))})},V=function(g){x(),q();const p=e.querySelector("[data-js-global-success]");p&&(p.textContent=g||"Thank you. We have received your enquiry and will respond within 24 hours (business days).",p.classList.remove("hidden"))};const d=e.querySelector('button[type="submit"]');e.addEventListener("submit",function(g){g.preventDefault(),x(),q(),S(!0);const p=new FormData(e);p.set("ajax","1");const w=document.querySelector('meta[name="recaptcha-site-key"]'),b=w?w.getAttribute("content"):"",h=typeof window.grecaptcha!="undefined"&&b,L=function(k){k&&p.set("recaptcha_token",k),fetch(e.action,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:p}).then(function(A){return A.json().catch(function(){return null})}).then(function(A){if(S(!1),!A){I({global:"Something went wrong. Please try again later."});return}A.success?(V(A.message),e.reset(),n(),v()):I(A.errors||{})}).catch(function(){S(!1),I({global:"We could not send your message right now. Please try again later."})})};h?window.grecaptcha.ready(function(){window.grecaptcha.execute(b,{action:"contact"}).then(function(k){L(k)}).catch(function(){S(!1),I({global:"We could not verify that you are a human. Please try again."})})}):L(null)})}window.setTimeout(function(){!r&&(!t||sessionStorage.getItem(l)!=="1")&&y("timer")},f);function E(){if(r){window.removeEventListener("scroll",E,{passive:!0});return}const d=document.documentElement,S=window.scrollY||d.scrollTop||0,x=window.innerHeight||d.clientHeight||0,q=d.scrollHeight||0;if(!q)return;(S+x)/q>=m&&y("scroll")}window.addEventListener("scroll",E,{passive:!0});const T=typeof a=="function"?a:function(){return window.innerWidth>=1024};function C(d){!T()||r||d.relatedTarget||d.toElement||d.clientY<=0&&y("exit-intent")}T()&&window.addEventListener("mouseout",C)}function H(){var u=document.querySelectorAll('form[data-track="contact-form"]');u.length&&u.forEach(function(a){var s=a.querySelector('input[name="name"]'),l=a.querySelector('input[name="email"]'),t=a.querySelector('textarea[name="message"]');if(!s||!l||!t)return;function c(r){var n=r.trim();return n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n):!1}function e(r){if(r){r.classList.remove("border-red-400"),r.classList.contains("border-slate-300")||r.classList.add("border-slate-300");var n=r.closest(".space-y-1")||r.parentElement;if(n){var i=n.querySelector("[data-field-error]");i&&i.remove()}}}function f(r,n){if(r){r.classList.remove("border-slate-300"),r.classList.add("border-red-400");var i=r.closest(".space-y-1")||r.parentElement;if(i){var o=i.querySelector("[data-field-error]");o||(o=document.createElement("p"),o.setAttribute("data-field-error","true"),o.className="mt-1 text-[11px] text-red-600",i.appendChild(o)),o.textContent=n}}}function m(){var r=!1;e(s),e(l),e(t);var n=s.value.trim(),i=l.value.trim(),o=t.value.trim();return n||(f(s,"Please enter your name."),r=!0),i?c(i)||(f(l,"Please enter a valid email address."),r=!0):(f(l,"Please enter your email."),r=!0),(!o||o.length<20)&&(f(t,"Please add a few more details (at least 20 characters)."),r=!0),!r}a.addEventListener("submit",function(r){if(!m()){r.preventDefault();var n=a.querySelector("[data-field-error]");n&&typeof n.scrollIntoView=="function"&&n.scrollIntoView({block:"nearest"})}}),[s,l,t].forEach(function(r){r.addEventListener("input",function(){e(r)})})})}function R(){var u=document.querySelector("[data-cookie-banner]");if(!u)return;var a="cookie-consent",s={ad_storage:"granted",analytics_storage:"granted",personalization_storage:"granted",functionality_storage:"granted",security_storage:"granted"},l=!1;try{window.localStorage&&localStorage.getItem(a)&&(l=!0)}catch(e){l=!1}if(l)return;u.classList.remove("hidden");var t=u.querySelector("[data-cookie-accept]");function c(){try{window.localStorage&&localStorage.setItem(a,JSON.stringify(s))}catch(e){}u.classList.add("hidden"),window.dataLayer&&Array.isArray(window.dataLayer)&&window.dataLayer.push({event:"cookie_consent_accepted"}),typeof gtag=="function"&&gtag("consent","update",s)}t&&t.addEventListener("click",function(e){e.preventDefault(),c()})}function O(){if(typeof window.intlTelInput!="function"){console.warn("[intlTelInput] Library not available");return}var u=document.querySelectorAll("[data-intl-tel-input]");u.length&&u.forEach(function(a){if(!a.__itiInstance){var s=a.form||null,l=window.intlTelInput(a,{initialCountry:"auto",geoIpLookup:(t,c)=>{fetch("https://ipapi.co/json").then(e=>e.json()).then(e=>t(e.country_code)).catch(()=>c())},hiddenInput:t=>({phone:"phone_full",country:"country_code"}),separateDialCode:!0,nationalMode:!1,autoHideDialCode:!1,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/utils.min.js"});a.__itiInstance=l,s&&s.addEventListener("submit",function(){try{l.isValidNumber()&&(a.value=l.getNumber())}catch(t){console.warn("[intlTelInput] Failed to normalize phone:",t)}})}})}function F(){var u=document.querySelector('[data-floating-stack="bottom-left"]');if(!u)return;var a=u.querySelector("[data-scroll-top-trigger]");if(!a)return;var s=400,l=80,t=!1;function c(){t||(t=!0,a.classList.remove("opacity-0","pointer-events-none","translate-y-2"),a.classList.add("opacity-100","pointer-events-auto","translate-y-0"))}function e(){t&&(t=!1,a.classList.add("opacity-0","pointer-events-none","translate-y-2"),a.classList.remove("opacity-100","pointer-events-auto","translate-y-0"))}window.addEventListener("scroll",function(){var f=window.pageYOffset||document.documentElement.scrollTop||0;f>s?c():f<l&&e()},{passive:!0}),a.addEventListener("click",function(){try{window.scrollTo({top:0,behavior:"smooth"})}catch(f){window.scrollTo(0,0)}})}})();})();

(()=>{(function(){"use strict";function M(i){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i,{once:!0}):i()}M(function(){const i=typeof window.matchMedia=="function",r=i?window.matchMedia("(prefers-reduced-motion: reduce)"):null,s=!!(r&&r.matches),d=i?window.matchMedia("(min-width: 1024px)"):null,t=()=>d?d.matches:window.innerWidth>=1024,c=typeof window.gsap!="undefined",e=c?window.gsap:null;c&&typeof window.ScrollTrigger!="undefined"&&e.registerPlugin(window.ScrollTrigger),V(),_({gsap:e,hasGsap:c,prefersReducedMotion:s}),j({gsap:e,hasGsap:c,prefersReducedMotion:s}),H({gsap:e,hasGsap:c,prefersReducedMotion:s}),P({gsap:e,hasGsap:c,prefersReducedMotion:s}),B(),R(),D(),O(),F()});function _(i){const{gsap:r,hasGsap:s,prefersReducedMotion:d}=i,t=document.querySelector("[data-cta-section]");if(!t)return;if(!s||d){t.querySelectorAll("[data-cta-step]").forEach(l=>{l.style.opacity="1",l.style.transform="none"});const n=t.querySelector("[data-cta-connector]");n&&(n.style.transform="scaleX(1)");return}const c=Array.from(t.querySelectorAll("[data-cta-step]"));if(!c.length)return;const e=t.querySelector("[data-cta-connector]");let u=!1;function p(){if(u)return;u=!0;const o=r.timeline();e&&o.fromTo(e,{scaleX:0,autoAlpha:0},{scaleX:1,autoAlpha:1,duration:.6,ease:"power2.out"}),o.fromTo(c,{y:32,autoAlpha:0},{y:0,autoAlpha:1,duration:.6,ease:"power3.out",stagger:.18},e?"-=0.25":0)}"IntersectionObserver"in window?new IntersectionObserver(n=>{n.forEach(l=>{l.target===t&&l.isIntersecting&&p()})},{threshold:.35}).observe(t):p()}function j(i){const{gsap:r,hasGsap:s,prefersReducedMotion:d}=i,t=document.querySelector("[data-faq-section]");if(!t)return;const c=Array.from(t.querySelectorAll("[data-faq-item]")),e=Array.from(t.querySelectorAll("[data-faq-trigger]"));if(!c.length||!e.length)return;if(s&&!d){const n=t.querySelector("[data-faq-header]"),l=r.timeline({paused:!0});if(n&&l.from(n,{y:24,autoAlpha:0,duration:.35,ease:"power2.out"}),l.from(c,{y:24,autoAlpha:0,duration:.35,ease:"power2.out",stagger:.05},n?"-=0.1":0),"IntersectionObserver"in window){const a=new IntersectionObserver(w=>{w.forEach(y=>{y.target===t&&y.isIntersecting&&(l.play(),a.disconnect())})},{threshold:.2});a.observe(t)}else l.play()}const u=new WeakMap;function p(n,l){const a=n.querySelector("[data-faq-panel]"),w=n.querySelector("[data-faq-trigger]");if(!a||!w)return;const y=u.get(a);if(y&&y.kill(),n.classList.toggle("is-open",l),w.setAttribute("aria-expanded",l?"true":"false"),a.hidden=!1,!s||d){const f=l?a.scrollHeight+"px":"0px";a.style.maxHeight=f,l||setTimeout(()=>{a.hidden=!0},260);return}const A=a.offsetHeight,k=l?a.scrollHeight:0,T=r.fromTo(a,{height:A},{height:k,duration:.28,ease:"power2.out",onComplete:()=>{a.style.height="",l||(a.hidden=!0)}});u.set(a,T)}function o(n){const l=n.classList.contains("is-open");c.forEach(a=>{a!==n&&a.classList.contains("is-open")&&p(a,!1)}),p(n,!l)}c.forEach((n,l)=>{const a=n.querySelector("[data-faq-panel]"),w=n.querySelector("[data-faq-trigger]");if(!a||!w)return;a.style.overflow="hidden",a.style.maxHeight="none";const y=l===0;n.classList.toggle("is-open",y),w.setAttribute("aria-expanded",y?"true":"false"),y?(a.hidden=!1,a.style.height="auto"):(a.hidden=!0,a.style.height="0"),w.addEventListener("click",()=>o(n))})}function H(i){const{gsap:r,hasGsap:s,prefersReducedMotion:d}=i,t=document.querySelector("[data-blog-teaser]");if(!t)return;const c=t.querySelector("[data-blog-header]"),e=t.querySelector("[data-blog-cta]"),u=Array.from(t.querySelectorAll("[data-blog-card]"));if(!s||d||!u.length)return;c&&r.set(c,{y:18,autoAlpha:0}),e&&r.set(e,{y:18,autoAlpha:0}),r.set(u,{y:26,autoAlpha:0});let p=!1;function o(){if(p)return;p=!0;const n=r.timeline({defaults:{duration:.6,ease:"power3.out"}});c&&n.to(c,{y:0,autoAlpha:1},0),e&&n.to(e,{y:0,autoAlpha:1},.05),n.to(u,{y:0,autoAlpha:1,stagger:.12},.1)}if("IntersectionObserver"in window){const n=new IntersectionObserver(l=>{l.forEach(a=>{a.target===t&&a.isIntersecting&&(o(),n.disconnect())})},{threshold:.25});n.observe(t)}else o()}function P(i){const{gsap:r,hasGsap:s,prefersReducedMotion:d}=i,t=document.querySelector("[data-contact-cta-section]");if(!t)return;const c=t.querySelector("[data-contact-cta-left]"),e=Array.from(t.querySelectorAll("[data-contact-stat]")),u=t.querySelector("[data-contact-cta-form]");if(!s||d)return;c&&r.set(c,{autoAlpha:0,y:26}),u&&r.set(u,{autoAlpha:0,y:26}),e.length&&r.set(e,{autoAlpha:0,y:26});let p=!1;function o(){if(p)return;p=!0;const n=r.timeline({defaults:{duration:.65,ease:"power3.out"}});c&&n.to(c,{autoAlpha:1,y:0},0),u&&n.to(u,{autoAlpha:1,y:0},.08),e.length&&n.to(e,{autoAlpha:1,y:0,stagger:.1},.12)}if("IntersectionObserver"in window){const n=new IntersectionObserver(l=>{l.forEach(a=>{a.target===t&&a.isIntersecting&&(o(),n.disconnect())})},{threshold:.25});n.observe(t)}else o()}function $(i){const{isDesktop:r}=i,s=document.querySelector("[data-exit-popup]");if(!s)return;const d="qalbit_exit_popup_dismissed",t=(function(){try{const f="__exit_test";return window.sessionStorage.setItem(f,"1"),window.sessionStorage.removeItem(f),!0}catch(f){return!1}})();if(t&&sessionStorage.getItem(d)==="1")return;const c=s.querySelectorAll("[data-exit-close]"),e=s.querySelector("form"),u=2e4,p=.5;let o=!1;function n(){t&&sessionStorage.setItem(d,"1")}function l(){s.classList.remove("hidden"),s.setAttribute("aria-hidden","false"),document.documentElement.classList.add("overflow-hidden"),document.body.classList.add("overflow-hidden")}function a(){o||(o=!0),s.classList.add("hidden"),s.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("overflow-hidden"),document.body.classList.remove("overflow-hidden"),n(),w()}function w(){window.removeEventListener("mouseout",T),window.removeEventListener("scroll",A,{passive:!0})}function y(f){o||(o=!0,w(),l())}if(c.forEach(function(f){f.addEventListener("click",function(S){S.preventDefault(),a()})}),s.addEventListener("click",function(f){f.target===s&&a()}),e){let S=function(g){f&&(g?(f.dataset.originalLabel||(f.dataset.originalLabel=f.textContent||"Send message"),f.disabled=!0,f.textContent="Sending..."):(f.disabled=!1,f.dataset.originalLabel&&(f.textContent=f.dataset.originalLabel)))},x=function(){let g=e.querySelector("[data-js-global-error]");g||(g=document.createElement("div"),g.setAttribute("data-js-global-error","true"),g.className="mb-3 hidden rounded-md border border-red-200 bg-red-50 px-4 py-3 text-xs text-red-800",e.prepend(g));let m=e.querySelector("[data-js-global-success]");m||(m=document.createElement("div"),m.setAttribute("data-js-global-success","true"),m.className="mb-3 hidden rounded-md border border-green-200 bg-green-50 px-4 py-3 text-xs text-green-800",e.prepend(m)),["name","email","message"].forEach(function(v){const b=e.querySelector(`[name="${v}"]`);if(!b)return;let h=e.querySelector(`[data-js-error-for="${v}"]`);h||(h=document.createElement("p"),h.setAttribute("data-js-error-for",v),h.className="mt-1 hidden text-[11px] text-red-600",b.insertAdjacentElement("afterend",h))})},L=function(){const g=e.querySelector("[data-js-global-error]");g&&(g.textContent="",g.classList.add("hidden"));const m=e.querySelector("[data-js-global-success]");m&&(m.textContent="",m.classList.add("hidden")),["name","email","message"].forEach(function(v){const b=e.querySelector(`[name="${v}"]`);b&&(b.classList.remove("border-red-400"),b.classList.add("border-slate-300"));const h=e.querySelector(`[data-js-error-for="${v}"]`);h&&(h.textContent="",h.classList.add("hidden"))})},I=function(g){if(x(),L(),!g)return;const m=e.querySelector("[data-js-global-error]");g.global&&m&&(m.textContent=g.global,m.classList.remove("hidden")),["name","email","message"].forEach(function(v){const b=g[v];if(!b)return;const h=e.querySelector(`[name="${v}"]`);h&&(h.classList.remove("border-slate-300"),h.classList.add("border-red-400"));const q=e.querySelector(`[data-js-error-for="${v}"]`);q&&(q.textContent=b,q.classList.remove("hidden"))})},W=function(g){x(),L();const m=e.querySelector("[data-js-global-success]");m&&(m.textContent=g||"Thank you. We have received your enquiry and will respond within 24 hours (business days).",m.classList.remove("hidden"))};const f=e.querySelector('button[type="submit"]');e.addEventListener("submit",function(g){g.preventDefault(),x(),L(),S(!0);const m=new FormData(e);m.set("ajax","1");const v=document.querySelector('meta[name="recaptcha-site-key"]'),b=v?v.getAttribute("content"):"",h=typeof window.grecaptcha!="undefined"&&b,q=function(C){C&&m.set("recaptcha_token",C),fetch(e.action,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:m}).then(function(E){return E.json().catch(function(){return null})}).then(function(E){if(S(!1),!E){I({global:"Something went wrong. Please try again later."});return}E.success?(W(E.message),e.reset(),n(),w()):I(E.errors||{})}).catch(function(){S(!1),I({global:"We could not send your message right now. Please try again later."})})};h?window.grecaptcha.ready(function(){window.grecaptcha.execute(b,{action:"contact"}).then(function(C){q(C)}).catch(function(){S(!1),I({global:"We could not verify that you are a human. Please try again."})})}):q(null)})}window.setTimeout(function(){!o&&(!t||sessionStorage.getItem(d)!=="1")&&y("timer")},u);function A(){if(o){window.removeEventListener("scroll",A,{passive:!0});return}const f=document.documentElement,S=window.scrollY||f.scrollTop||0,x=window.innerHeight||f.clientHeight||0,L=f.scrollHeight||0;if(!L)return;(S+x)/L>=p&&y("scroll")}window.addEventListener("scroll",A,{passive:!0});const k=typeof r=="function"?r:function(){return window.innerWidth>=1024};function T(f){!k()||o||f.relatedTarget||f.toElement||f.clientY<=0&&y("exit-intent")}k()&&window.addEventListener("mouseout",T)}function B(){var i=document.querySelectorAll('form[data-track="contact-form"]');i.length&&i.forEach(function(r){var s=r.querySelector('input[name="name"]'),d=r.querySelector('input[name="email"]'),t=r.querySelector('textarea[name="message"]');if(!s||!d||!t)return;function c(o){var n=o.trim();return n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n):!1}function e(o){if(o){o.classList.remove("border-red-400"),o.classList.contains("border-slate-300")||o.classList.add("border-slate-300");var n=o.closest(".space-y-1")||o.parentElement;if(n){var l=n.querySelector("[data-field-error]");l&&l.remove()}}}function u(o,n){if(o){o.classList.remove("border-slate-300"),o.classList.add("border-red-400");var l=o.closest(".space-y-1")||o.parentElement;if(l){var a=l.querySelector("[data-field-error]");a||(a=document.createElement("p"),a.setAttribute("data-field-error","true"),a.className="mt-1 text-[11px] text-red-600",l.appendChild(a)),a.textContent=n}}}function p(){var o=!1;e(s),e(d),e(t);var n=s.value.trim(),l=d.value.trim(),a=t.value.trim();return n||(u(s,"Please enter your name."),o=!0),l?c(l)||(u(d,"Please enter a valid email address."),o=!0):(u(d,"Please enter your email."),o=!0),(!a||a.length<20)&&(u(t,"Please add a few more details (at least 20 characters)."),o=!0),!o}r.addEventListener("submit",function(o){if(!p()){o.preventDefault();var n=r.querySelector("[data-field-error]");n&&typeof n.scrollIntoView=="function"&&n.scrollIntoView({block:"nearest"})}}),[s,d,t].forEach(function(o){o.addEventListener("input",function(){e(o)})})})}function R(){var i=document.querySelector("[data-cookie-banner]");if(!i)return;var r="cookie-consent",s={ad_storage:"granted",analytics_storage:"granted",personalization_storage:"granted",functionality_storage:"granted",security_storage:"granted"},d=!1;try{window.localStorage&&localStorage.getItem(r)&&(d=!0)}catch(e){d=!1}if(d)return;i.classList.remove("hidden");var t=i.querySelector("[data-cookie-accept]");function c(){try{window.localStorage&&localStorage.setItem(r,JSON.stringify(s))}catch(e){}i.classList.add("hidden"),window.dataLayer&&Array.isArray(window.dataLayer)&&window.dataLayer.push({event:"cookie_consent_accepted"}),typeof gtag=="function"&&gtag("consent","update",s)}t&&t.addEventListener("click",function(e){e.preventDefault(),c()})}function D(){if(typeof window.intlTelInput!="function"){console.warn("[intlTelInput] Library not available");return}var i=document.querySelectorAll("[data-intl-tel-input]");i.length&&i.forEach(function(r){if(!r.__itiInstance){var s=r.form||null,d=window.intlTelInput(r,{initialCountry:"auto",geoIpLookup:(t,c)=>{fetch("https://ipapi.co/json").then(e=>e.json()).then(e=>t(e.country_code)).catch(()=>c())},hiddenInput:t=>({phone:"phone_full",country:"country_code"}),separateDialCode:!0,nationalMode:!1,autoHideDialCode:!1,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/utils.min.js"});r.__itiInstance=d,s&&s.addEventListener("submit",function(){try{d.isValidNumber()&&(r.value=d.getNumber())}catch(t){console.warn("[intlTelInput] Failed to normalize phone:",t)}})}})}function O(){var i=document.querySelector('[data-floating-stack="bottom-left"]');if(!i)return;var r=i.querySelector("[data-scroll-top-trigger]");if(!r)return;var s=400,d=80,t=!1;function c(){t||(t=!0,r.classList.remove("opacity-0","pointer-events-none","translate-y-2"),r.classList.add("opacity-100","pointer-events-auto","translate-y-0"))}function e(){t&&(t=!1,r.classList.add("opacity-0","pointer-events-none","translate-y-2"),r.classList.remove("opacity-100","pointer-events-auto","translate-y-0"))}window.addEventListener("scroll",function(){var u=window.pageYOffset||document.documentElement.scrollTop||0;u>s?c():u<d&&e()},{passive:!0}),r.addEventListener("click",function(){try{window.scrollTo({top:0,behavior:"smooth"})}catch(u){window.scrollTo(0,0)}})}function F(){document.querySelectorAll('[data-js="reload-page"]').forEach(function(i){i.addEventListener("click",function(){window.location.reload()})})}function V(){const i=document.getElementById("mobile-menu"),r=document.getElementById("mobile-menu-panel"),s=document.getElementById("mobile-menu-toggle"),d=document.getElementById("mobile-menu-close");if(!i||!r||!s||!d)return;function t(){i.classList.remove("pointer-events-none","opacity-0"),i.classList.add("pointer-events-auto","opacity-100"),r.classList.remove("translate-x-full"),r.classList.add("translate-x-0"),i.setAttribute("aria-hidden","false"),s.setAttribute("aria-expanded","true")}function c(){i.classList.add("pointer-events-none","opacity-0"),i.classList.remove("pointer-events-auto","opacity-100"),r.classList.add("translate-x-full"),r.classList.remove("translate-x-0"),i.setAttribute("aria-hidden","true"),s.setAttribute("aria-expanded","false")}s.addEventListener("click",t),d.addEventListener("click",c),i.addEventListener("click",function(e){e.target===i&&c()}),document.addEventListener("keydown",function(e){e.key==="Escape"&&c()}),document.querySelectorAll("[data-submenu-toggle]").forEach(function(e){const u=e.getAttribute("data-submenu-toggle"),p=document.getElementById(u),o=document.querySelector('[data-submenu-chevron="'+u+'"]');p&&e.addEventListener("click",function(){p.classList.contains("hidden")?(p.classList.remove("hidden"),o&&o.classList.add("rotate-180"),e.setAttribute("aria-expanded","true")):(p.classList.add("hidden"),o&&o.classList.remove("rotate-180"),e.setAttribute("aria-expanded","false"))})})}})();})();
